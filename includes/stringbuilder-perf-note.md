<span data-ttu-id="02606-101">Mithilfe der Indizierung zeichenbasierte, mit der <xref:System.Text.StringBuilder.Chars%2A> Eigenschaft kann in den folgenden Situationen extrem langsam sein:</span><span class="sxs-lookup"><span data-stu-id="02606-101">Using character-based indexing with the <xref:System.Text.StringBuilder.Chars%2A> property can be extremely slow under the following conditions:</span></span>

- <span data-ttu-id="02606-102">Die <xref:System.Text.StringBuilder> Instanz groß ist (z. B. besteht aus mehreren Zehntausenden von Zeichen).</span><span class="sxs-lookup"><span data-stu-id="02606-102">The <xref:System.Text.StringBuilder> instance is large (for example, it consists of several tens of thousands of characters).</span></span>
- <span data-ttu-id="02606-103">Die <xref:System.Text.StringBuilder> ist "segmentierte".</span><span class="sxs-lookup"><span data-stu-id="02606-103">The <xref:System.Text.StringBuilder> is "chunky."</span></span> <span data-ttu-id="02606-104">Wiederholte Aufrufe von Methoden wie z. B. <xref:System.Text.StringBuilder.Append%2A?displayProperty=nameWithType> haben automatisch erweitert, des Objekts <xref:System.Text.StringBuilder.Capacity%2A?displayProperty=nameWithType> Eigenschaft und jedes zugeordnete neue Blöcke von Arbeitsspeicher zu.</span><span class="sxs-lookup"><span data-stu-id="02606-104">That is, repeated calls to methods such as <xref:System.Text.StringBuilder.Append%2A?displayProperty=nameWithType> have automatically expanded the object's <xref:System.Text.StringBuilder.Capacity%2A?displayProperty=nameWithType> property and allocated new chunks of memory to it.</span></span>

<span data-ttu-id="02606-105">Da jedes Zeichen Zugriff die gesamte verknüpfte Liste von Ausschnitten, um die richtige Puffergröße zu indizierenden in Suchen führt, wird die Leistung erheblich beeinträchtigt.</span><span class="sxs-lookup"><span data-stu-id="02606-105">Performance is severely impacted because each character access walks the entire linked list of chunks to find the correct buffer to index into.</span></span>

> [!NOTE]
>  <span data-ttu-id="02606-106">Dies gilt auch für eine große "segmentierte" <xref:System.Text.StringBuilder> -Objekt unter Verwendung der <xref:System.Text.StringBuilder.Chars%2A> -Eigenschaft für Index-basierten Zugriff auf eine oder eine kleine Anzahl von Zeichen hat Auswirkungen auf die Leistung unerheblich; in der Regel ist ein **0(n)** Vorgang.</span><span class="sxs-lookup"><span data-stu-id="02606-106">Even for a large "chunky" <xref:System.Text.StringBuilder> object, using the <xref:System.Text.StringBuilder.Chars%2A> property for index-based access to one or a small number of characters has a negligible performance impact; typically, it is an **0(n)** operation.</span></span> <span data-ttu-id="02606-107">Die erheblichen Leistungseinbußen tritt auf, wenn es sich bei die Zeichen in einem durchlaufenden der <xref:System.Text.StringBuilder> Objekt, das eine **O(n^2)** Vorgang.</span><span class="sxs-lookup"><span data-stu-id="02606-107">The significant performance impact occurs when iterating the characters in the <xref:System.Text.StringBuilder> object, which is an **O(n^2)** operation.</span></span> 

<span data-ttu-id="02606-108">Wenn Leistungsprobleme auftreten, bei Verwendung mit Indizierung zeichenbasierte <xref:System.Text.StringBuilder> Objekte aufweist, können Sie jede der folgenden problemumgehungen verwenden:</span><span class="sxs-lookup"><span data-stu-id="02606-108">If you encounter performance issues when using character-based indexing with <xref:System.Text.StringBuilder> objects, you can use any of the following workarounds:</span></span>

- <span data-ttu-id="02606-109">Konvertieren der <xref:System.Text.StringBuilder> -Instanz, auf eine <xref:System.String> durch Aufrufen der <xref:System.Text.StringBuilder.ToString%2A> -Methode, klicken Sie dann Zugriff auf die Zeichen in der Zeichenfolge.</span><span class="sxs-lookup"><span data-stu-id="02606-109">Convert the <xref:System.Text.StringBuilder> instance to a <xref:System.String> by calling the <xref:System.Text.StringBuilder.ToString%2A> method, then access the characters in the string.</span></span>

- <span data-ttu-id="02606-110">Kopieren Sie den Inhalt des vorhandenen <xref:System.Text.StringBuilder> Objekt auf eine neue vorab Größe <xref:System.Text.StringBuilder> Objekt.</span><span class="sxs-lookup"><span data-stu-id="02606-110">Copy the contents of the existing <xref:System.Text.StringBuilder> object to a new pre-sized <xref:System.Text.StringBuilder> object.</span></span> <span data-ttu-id="02606-111">Verbessert die Leistung, da die neue <xref:System.Text.StringBuilder> Objekt ist kein segmentierten.</span><span class="sxs-lookup"><span data-stu-id="02606-111">Performance improves because the new <xref:System.Text.StringBuilder> object is not chunky.</span></span> <span data-ttu-id="02606-112">Zum Beispiel:</span><span class="sxs-lookup"><span data-stu-id="02606-112">For example:</span></span>

   ```csharp
   // sbOriginal is the existing StringBuilder object
   var sbNew = new StringBuilder(sbOriginal.ToString(), sbOriginal.Length);
   ```
   ```vb
   ' sbOriginal is the existing StringBuilder object
   Dim sbNew = New StringBuilder(sbOriginal.ToString(), sbOriginal.Length)
   ```
- <span data-ttu-id="02606-113">Legen Sie die anfängliche Kapazität der <xref:System.Text.StringBuilder> Objekt auf einen Wert, der die maximale erwartete Größe ungefähr gleich durch Aufrufen der <xref:System.Text.StringBuilder.%23ctor(System.Int32)> Konstruktor.</span><span class="sxs-lookup"><span data-stu-id="02606-113">Set the initial capacity of the <xref:System.Text.StringBuilder> object to a value that is approximately equal to its maximum expected size by calling the <xref:System.Text.StringBuilder.%23ctor(System.Int32)> constructor.</span></span> <span data-ttu-id="02606-114">Beachten Sie, dass dies den gesamten Block Arbeitsspeicher zurück, sogar wenn ordnet die <xref:System.Text.StringBuilder> selten die maximale Kapazität erreicht.</span><span class="sxs-lookup"><span data-stu-id="02606-114">Note that this allocates the entire block of memory even if the <xref:System.Text.StringBuilder> rarely reaches its maximum capacity.</span></span>
