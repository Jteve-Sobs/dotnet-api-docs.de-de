---
ms.openlocfilehash: 903ac4ecb57e3a8e02a4f65ecfa6f9e77a552f45
ms.sourcegitcommit: 5ef0d02cb57c7153fd9d5417cdcad45665af832e
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/29/2019
ms.locfileid: "71139679"
---
<span data-ttu-id="3b690-101">Das Verwenden von zeichenbasierter Indizierung mit der <xref:System.Text.StringBuilder.Chars%2A>-Eigenschaft kann unter folgenden Bedingungen sehr langsam sein:</span><span class="sxs-lookup"><span data-stu-id="3b690-101">Using character-based indexing with the <xref:System.Text.StringBuilder.Chars%2A> property can be extremely slow under the following conditions:</span></span>

- <span data-ttu-id="3b690-102">Die <xref:System.Text.StringBuilder>-Instanz ist groß, weil sie beispielsweise aus Zehntausenden von Zeichen besteht.</span><span class="sxs-lookup"><span data-stu-id="3b690-102">The <xref:System.Text.StringBuilder> instance is large (for example, it consists of several tens of thousands of characters).</span></span>
- <span data-ttu-id="3b690-103"><xref:System.Text.StringBuilder> ist „blockweise“ strukturiert.</span><span class="sxs-lookup"><span data-stu-id="3b690-103">The <xref:System.Text.StringBuilder> is "chunky."</span></span> <span data-ttu-id="3b690-104">Das bedeutet, dass wiederholte Aufrufe von Methoden (z.B. <xref:System.Text.StringBuilder.Append%2A?displayProperty=nameWithType>) die <xref:System.Text.StringBuilder.Capacity%2A?displayProperty=nameWithType>-Eigenschaft des Objekts automatisch erweitert haben und dieser neue Arbeitsspeicherblöcke zugeordnet haben.</span><span class="sxs-lookup"><span data-stu-id="3b690-104">That is, repeated calls to methods such as <xref:System.Text.StringBuilder.Append%2A?displayProperty=nameWithType> have automatically expanded the object's <xref:System.Text.StringBuilder.Capacity%2A?displayProperty=nameWithType> property and allocated new chunks of memory to it.</span></span>

<span data-ttu-id="3b690-105">Die Leistung wird erheblich beeinträchtigt, da für jeden Zugriff auf ein Zeichen die gesamte verknüpfte Liste der Blöcke durchlaufen wird, um den richtigen Puffer für die Indizierung zu suchen.</span><span class="sxs-lookup"><span data-stu-id="3b690-105">Performance is severely impacted because each character access walks the entire linked list of chunks to find the correct buffer to index into.</span></span>

> [!NOTE]
>  <span data-ttu-id="3b690-106">Auch für ein „blockweise“ strukturiertes <xref:System.Text.StringBuilder>-Objekt kann das Verwenden der <xref:System.Text.StringBuilder.Chars%2A>-Eigenschaft für den indexbasierten Zugriff auf ein oder wenige Zeichen eine negative Auswirkung auf die Leistung haben. Üblicherweise handelt es sich dabei um eine **0(n)**-Operation.</span><span class="sxs-lookup"><span data-stu-id="3b690-106">Even for a large "chunky" <xref:System.Text.StringBuilder> object, using the <xref:System.Text.StringBuilder.Chars%2A> property for index-based access to one or a small number of characters has a negligible performance impact; typically, it is an **0(n)** operation.</span></span> <span data-ttu-id="3b690-107">Diese erheblichen Auswirkungen auf die Leistung treten auf, wenn die Zeichen im <xref:System.Text.StringBuilder>-Objekt durchlaufen werden. Dabei handelt es sich um eine **O(n^2)**-Operation.</span><span class="sxs-lookup"><span data-stu-id="3b690-107">The significant performance impact occurs when iterating the characters in the <xref:System.Text.StringBuilder> object, which is an **O(n^2)** operation.</span></span> 

<span data-ttu-id="3b690-108">Wenn Leistungsprobleme auftreten, wenn Sie die zeichenbasierte Indizierung mit <xref:System.Text.StringBuilder>-Objekten verwenden, können Sie eine der folgenden Problemumgehungen anwenden:</span><span class="sxs-lookup"><span data-stu-id="3b690-108">If you encounter performance issues when using character-based indexing with <xref:System.Text.StringBuilder> objects, you can use any of the following workarounds:</span></span>

- <span data-ttu-id="3b690-109">Konvertieren Sie die <xref:System.Text.StringBuilder>-Instanz zu <xref:System.String>, indem Sie die <xref:System.Text.StringBuilder.ToString%2A>-Methode aufrufen. Greifen Sie dann auf die Zeichen in der Zeichenfolge zu.</span><span class="sxs-lookup"><span data-stu-id="3b690-109">Convert the <xref:System.Text.StringBuilder> instance to a <xref:System.String> by calling the <xref:System.Text.StringBuilder.ToString%2A> method, then access the characters in the string.</span></span>

- <span data-ttu-id="3b690-110">Kopieren Sie die Inhalte des vorhandenen <xref:System.Text.StringBuilder>-Objekts in ein neues <xref:System.Text.StringBuilder>-Objekt mit vorab festgelegter Größe.</span><span class="sxs-lookup"><span data-stu-id="3b690-110">Copy the contents of the existing <xref:System.Text.StringBuilder> object to a new pre-sized <xref:System.Text.StringBuilder> object.</span></span> <span data-ttu-id="3b690-111">Die Leistung verbessert sich, da das neue <xref:System.Text.StringBuilder>-Objekt nicht „blockweise“ strukturiert ist.</span><span class="sxs-lookup"><span data-stu-id="3b690-111">Performance improves because the new <xref:System.Text.StringBuilder> object is not chunky.</span></span> <span data-ttu-id="3b690-112">Beispiel:</span><span class="sxs-lookup"><span data-stu-id="3b690-112">For example:</span></span>

   ```csharp
   // sbOriginal is the existing StringBuilder object
   var sbNew = new StringBuilder(sbOriginal.ToString(), sbOriginal.Length);
   ```
   ```vb
   ' sbOriginal is the existing StringBuilder object
   Dim sbNew = New StringBuilder(sbOriginal.ToString(), sbOriginal.Length)
   ```
- <span data-ttu-id="3b690-113">Legen Sie die anfängliche Kapazität des <xref:System.Text.StringBuilder>-Objekts auf einen Wert fest, der ungefähr der maximal erwarteten Größe entspricht, indem der <xref:System.Text.StringBuilder.%23ctor(System.Int32)>-Konstruktor aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="3b690-113">Set the initial capacity of the <xref:System.Text.StringBuilder> object to a value that is approximately equal to its maximum expected size by calling the <xref:System.Text.StringBuilder.%23ctor(System.Int32)> constructor.</span></span> <span data-ttu-id="3b690-114">Beachten Sie, dass dadurch der gesamte Arbeitsspeicherblock zugeordnet wird, auch wenn <xref:System.Text.StringBuilder> selten die maximale Kapazität erreicht.</span><span class="sxs-lookup"><span data-stu-id="3b690-114">Note that this allocates the entire block of memory even if the <xref:System.Text.StringBuilder> rarely reaches its maximum capacity.</span></span>
