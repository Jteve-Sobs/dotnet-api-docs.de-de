### <a name="connection-pool-blocking-period-for-azure-sql-databases-is-removed"></a><span data-ttu-id="2e27b-101">Verbindungspool blockieren Zeitraum für die Azure SQL-Datenbanken wird entfernt.</span><span class="sxs-lookup"><span data-stu-id="2e27b-101">Connection pool blocking period for Azure SQL databases is removed</span></span>

|   |   |
|---|---|
|<span data-ttu-id="2e27b-102">Details</span><span class="sxs-lookup"><span data-stu-id="2e27b-102">Details</span></span>|<span data-ttu-id="2e27b-103">Beginnend mit .NET Framework 4.6.2, für die Verbindung öffnen Anforderungen für bekannte Azure SQL-Datenbanken (*. database.windows.net, *. database.chinacloudapi.cn, *. database.usgovcloudapi.net, *. database.cloudapi.de), den Verbindungspool Sperrfrist ist entfernt, und Öffnen von Verbindungsfehlern nicht zwischengespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="2e27b-103">Starting with the .NET Framework 4.6.2, for connection open requests to known Azure SQL databases (*.database.windows.net, *.database.chinacloudapi.cn, *.database.usgovcloudapi.net, *.database.cloudapi.de), the connection pool blocking period is removed, and connection open errors are not cached.</span></span> <span data-ttu-id="2e27b-104">Wiederholungsversuche von Anforderungen zum Öffnen von Verbindungen erfolgen nahezu unmittelbar nach vorübergehenden Verbindungsfehlern.</span><span class="sxs-lookup"><span data-stu-id="2e27b-104">Attempts to retry connection open requests will occur almost immediately after transient connection errors.</span></span> <span data-ttu-id="2e27b-105">Diese Änderung kann der geöffneten Verbindungsversuch sofort für Azure SQL-Datenbanken, und somit Verbessern der Leistung von aktiviert Cloud-apps wiederholt werden.</span><span class="sxs-lookup"><span data-stu-id="2e27b-105">This change allows the connection open attempt to be retried immediately for Azure SQL databases, thereby improving the performance of cloud- enabled apps.</span></span> <span data-ttu-id="2e27b-106">Für alle anderen Verbindungsversuche weiterhin die Verbindung Pool Sperrfrist erzwungen werden. In .NET Framework 4.6.1 und früheren Versionen Wenn eine app einen vorübergehende Verbindungsfehler, beim Verbinden mit einer Datenbank feststellt kann nicht der Verbindungsversuch schnell, wiederholt da Verbindungspool den Fehler speichert und löst ihn erneut aus, 5 Sekunden lang auf 1 die Minute.</span><span class="sxs-lookup"><span data-stu-id="2e27b-106">For all other connection attempts, the connection pool blocking period continues to be enforced.In the .NET Framework 4.6.1 and earlier versions, when an app encounters a transient connection failure when connecting to a database, the connection attempt cannot be retried quickly, because the connection pool caches the error and re-throws it for 5 seconds to 1 minute.</span></span> <span data-ttu-id="2e27b-107">Weitere Informationen finden Sie unter [SQL Server Connection Pooling (ADO.NET)](~/docs/framework/data/adonet/sql-server-connection-pooling.md).</span><span class="sxs-lookup"><span data-stu-id="2e27b-107">For more information, see [SQL Server Connection Pooling (ADO.NET)](~/docs/framework/data/adonet/sql-server-connection-pooling.md).</span></span> <span data-ttu-id="2e27b-108">Dieses Verhalten ist für Verbindungen mit Azure SQL-Datenbanken problematisch, die häufig aufgrund vorübergehender Fehler fehlschlagen, die in der Regel innerhalb weniger Sekunden behoben sind.</span><span class="sxs-lookup"><span data-stu-id="2e27b-108">This behavior is problematic for connections to Azure SQL databases, which often fail with transient errors that are typically recovered from within a few seconds.</span></span> <span data-ttu-id="2e27b-109">Der blockierenden Verbindung Poolfunktion bedeutet, dass die app mit der Datenbank für eine umfangreiche Zeitraum keine Verbindung herstellen kann, obwohl die Datenbank verfügbar ist und die app innerhalb von wenigen Sekunden zu rendern muss.</span><span class="sxs-lookup"><span data-stu-id="2e27b-109">The connection pool blocking feature means that the app cannot connect to the database for an extensive period, even though the database is available and the app needs to render within a few seconds.</span></span>|
|<span data-ttu-id="2e27b-110">Vorschlag</span><span class="sxs-lookup"><span data-stu-id="2e27b-110">Suggestion</span></span>|<span data-ttu-id="2e27b-111">Wenn dieses Verhalten nicht erwünscht ist, kann die Verbindung Pool Sperrfrist konfiguriert werden, durch Festlegen der <xref:System.Data.SqlClient.SqlConnectionStringBuilder.PoolBlockingPeriod?displayProperty=name> Eigenschaft, die in .NET Framework 4.6.2 eingeführt.</span><span class="sxs-lookup"><span data-stu-id="2e27b-111">If this behavior is undesirable, the connection pool blocking period can be configured by setting the <xref:System.Data.SqlClient.SqlConnectionStringBuilder.PoolBlockingPeriod?displayProperty=name> property introduced in the .NET Framework 4.6.2.</span></span> <span data-ttu-id="2e27b-112">Der Wert der Eigenschaft ist ein Mitglied der <xref:System.Data.SqlClient.PoolBlockingPeriod?displayProperty=name>-Enumeration, die einen von drei Werten annehmen kann:</span><span class="sxs-lookup"><span data-stu-id="2e27b-112">The value of the property is a member of the <xref:System.Data.SqlClient.PoolBlockingPeriod?displayProperty=name> enumeration that can take either of three values:</span></span><ul><li><xref:System.Data.SqlClient.PoolBlockingPeriod.AlwaysBlock></li><li><xref:System.Data.SqlClient.PoolBlockingPeriod.Auto></li><li><xref:System.Data.SqlClient.PoolBlockingPeriod.NeverBlock></li></ul><span data-ttu-id="2e27b-113">Das vorherige Verhalten kann wiederhergestellt werden, indem Sie die <xref:System.Data.SqlClient.SqlConnectionStringBuilder.PoolBlockingPeriod?displayProperty=name>-Eigenschaft auf <xref:System.Data.SqlClient.PoolBlockingPeriod.AlwaysBlock> festlegen.</span><span class="sxs-lookup"><span data-stu-id="2e27b-113">The previous behavior can be restored by setting the <xref:System.Data.SqlClient.SqlConnectionStringBuilder.PoolBlockingPeriod?displayProperty=name> property to <xref:System.Data.SqlClient.PoolBlockingPeriod.AlwaysBlock>.</span></span>|
|<span data-ttu-id="2e27b-114">Bereich</span><span class="sxs-lookup"><span data-stu-id="2e27b-114">Scope</span></span>|<span data-ttu-id="2e27b-115">Gering</span><span class="sxs-lookup"><span data-stu-id="2e27b-115">Minor</span></span>|
|<span data-ttu-id="2e27b-116">Version</span><span class="sxs-lookup"><span data-stu-id="2e27b-116">Version</span></span>|<span data-ttu-id="2e27b-117">4.6.2</span><span class="sxs-lookup"><span data-stu-id="2e27b-117">4.6.2</span></span>|
|<span data-ttu-id="2e27b-118">Typ</span><span class="sxs-lookup"><span data-stu-id="2e27b-118">Type</span></span>|<span data-ttu-id="2e27b-119">Laufzeit</span><span class="sxs-lookup"><span data-stu-id="2e27b-119">Runtime</span></span>|
|<span data-ttu-id="2e27b-120">Betroffene APIs</span><span class="sxs-lookup"><span data-stu-id="2e27b-120">Affected APIs</span></span>|<ul><li><xref:System.Data.Common.DbConnection.OpenAsync?displayProperty=nameWithType></li><li><xref:System.Data.SqlClient.SqlConnection.Open?displayProperty=nameWithType></li><li><xref:System.Data.SqlClient.SqlConnection.OpenAsync(System.Threading.CancellationToken)?displayProperty=nameWithType></li></ul>|

