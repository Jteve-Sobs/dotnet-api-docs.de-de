### <a name="wpf-grid-allocation-of-space-to-star-columns"></a>WPF-Raster speicherplatzzuordnung Stern-Spalten

|   |   |
|---|---|
|Details|Ab der .NET Framework-4.7 WPF ersetzt den Algorithmus, <xref:System.Windows.Controls.Grid> verwendet, um Speicherplatz zu reservieren *-Spalten. Dadurch wird die tatsächliche Breite zugewiesen geändert *-Spalten in einer Reihe von Fällen:<ul><li>Wenn eine oder mehrere *-Spalten weisen auch eine minimale oder maximale Breite, die die Zuordnung des proportionale für diese columnstore überschreibt. (Die minimale Breite kann aus eine explizite Deklaration von MinWidth oder aus einem impliziten Minimum der Spalteninhalt abgerufenes ableiten. Die maximale Breite kann nur explizit in einer Deklaration MaxWidth definiert werden.)</li><li>Wenn eine oder mehrere *-Spalten deklariert einen extrem großen *-Gewichtung, die größer als 10 ^ 298.</li><li>Wenn das *-Gewichtungen sind ausreichend unterschiedlich Gleitkomma Instabilität (Überlauf, Unterlauf, einem Genauigkeitsverlust) auftreten.</li><li>Wenn Layoutglättung aktiviert ist und der effektive DPI-Wert der Anzeige ausreichend hoch ist.</li></ul>In den ersten beiden Fällen können die Breite, die durch den neuen Algorithmus erstellte wesentlich von denen unterscheiden, von der alten-Algorithmus erstellt werden; im letzten Fall wird der Unterschied darf höchstens ein oder zwei Pixel betragen. Der neue Algorithmus behebt mehrere Fehler in der alten Algorithmus vorhanden:<ol><li>Die Gesamtzuweisung an Spalten kann die Breite des Rasters überschreiten. Dies kann beim Zuweisen von Platz an eine Spalte geschehen, deren proportionaler Anteil geringer als ihre Mindestgröße ist. Der Algorithmus weist die Mindestgröße zu, wodurch der für andere Spalten verfügbare Platz verringert wird. Wenn es sind keine *-Spalten links zuzuordnen, die gesamtzuordnung zu groß werden wird.</li><li>Die Gesamtzuweisung kann die Breite des Rasters unterschreiten. Dies ist das duale Problem mit #1, die sich ergeben, wenn die Zuweisung zu einer Spalte, deren proportionalen Anteil größer als die maximale Größe, ohne ist *-Spalten, die Links, um die Slack auszufüllen.</li><li>Zwei *-Spalten können nicht proportional zur Zuordnungen erhalten ihre *-Gewichtungen. Dies ist eine mildere Version von Nr. 1/Nr. 2, die beim Zuweisen zu den *-Spalten A, B und C (in dieser Reihenfolge) auftritt, wobei der proportionale Anteil von B gegen deren Min- oder Max-Bedingung verstößt. Wie oben ändert sich dadurch der für Spalte C zur Verfügung stehende Platz, die proportional eine kleinere (oder größeren) Zuweisung als A erhält.</li><li>Spalten mit extrem großen Gewichtungen (&gt; 10 ^ 298) alle behandelt, als ob Gewichtung 10 arbeitete ^ 298. Proportionale Unterschiede zwischen ihnen (und zwischen Spalten mit erheblich kleineren Gewichtungen) werden nicht berücksichtigt.</li><li>Spalten mit Inifinte Gewichtungen werden nicht ordnungsgemäß behandelt. [Tatsächlich lässt sich die Gewichtung nicht auf unendlich festlegen, aber das ist eine künstliche Einschränkung. Der Zuweisungscode hat versucht, das Problem zu behandeln, dabei aber versagt.]</li><li>Mehrere kleinere Probleme beim Vermeiden von Überlauf, Unterlauf, Genauigkeitsverlust und ähnlichen Gleitkommaproblemen.</li><li>Anpassungen für Layoutglättung sind bei ausreichend hohem DPI fehlerhaft.</li></ol>Der neue Algorithmus führt zu Ergebnissen, die die folgenden Kriterien: ein erfüllen. Die tatsächliche Breite zugewiesen eine *-Spalte ist nie kleiner als die minimale Breite noch größer als die maximale Breite. B. Jede <em>-Spalte, die nicht die minimale oder maximale Breite ist zugewiesen proportional zur Breite seine <em>-Gewichtung. Genau, wenn zwei Spalten mit einer Breite von x deklariert werden</em> und y</em> , und wenn keine Spalte die minimale oder maximale Breite empfängt, die tatsächliche Breite V und w, die die Spalten zugewiesen sind, im selben Verhältnis: V / w == X / y.C. Die Gesamtbreite zugeordnete &quot;proportional&quot; *-Spalten ist der verfügbare Speicherplatz gleich, nachdem Sie die eingeschränkte Spalten zugeordnet haben (behoben, auto, und *-Spalten, die die Breite Minimal- oder Maximalwerte zugewiesen werden). Dies ist möglicherweise NULL ist, z. B. wenn die Summe für die minimale Breite des Datenblatts Availbable Breite überschreitet. D. Alle diese Anweisungen sind in Bezug auf interpretiert werden die &quot;ideal&quot; Layout. Wenn die layoutglättung aktiviert ist, können die tatsächliche Breite von die ideale Breite so weit wie ein Pixel unterscheiden. Der alte Algorithmus berücksichtigt die sonstigen Kriterien in den oben beschriebenen Fällen konnte jedoch berücksichtigt, (A). Alles, was zu Spalten und Breite in diesem Artikel gesagt gilt auch für Zeilen und die Höhe.|
|Vorschlag|Standardmäßig apps, die auf Versionen von .NET Framework, beginnend mit der .NET Framework-4.7 den neuen Algorithmus, während der apps angezeigt werden, die für .NET Framework 4.6.2 oder früheren Versionen den alten Algorithmus angezeigt werden. Um die Standardeinstellung zu überschreiben, verwenden Sie die folgende Konfigurationseinstellung:<pre><code class="language-xml">&lt;runtime&gt;&#13;&#10;&lt;AppContextSwitchOverrides value=&quot;Switch.System.Windows.Controls.Grid.StarDefinitionsCanExceedAvailableSpace=true&quot; /&gt;&#13;&#10;&lt;/runtime&gt;&#13;&#10;</code></pre>Der Wert 'True' wählt den alten Algorithmus, "falsch" wählt den neuen Algorithmus an.|
|Bereich|Gering|
|Version|4.7|
|Typ|Neuzuweisung|

