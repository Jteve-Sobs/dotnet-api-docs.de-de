### <a name="wpf-grid-allocation-of-space-to-star-columns"></a>Platzvergabe im Raster für *-Spalten

|   |   |
|---|---|
|Details|Ab .NET Framework 4.7 ersetzt WPF den Algorithmus, den <xref:System.Windows.Controls.Grid> verwendet, um Platz für *-Spalten zuzuweisen. Dadurch wird die den *-Spalten zugewiesene tatsächliche Breite geändert,<ul><li>wenn mindestens eine *-Spalte außerdem eine Minimal- oder Maximalbreite aufweisen, die die proportionale Zuweisung für die betreffende Spalte außer Kraft setzt. (Die Minimalbreite kann aus einer expliziten MinWidth-Deklaration oder aus einem impliziten Minimalwert abgeleitet werden, der sich aus dem Spalteninhalt ergibt. Die maximale Breite kann nur explizit aus einer MaxWidth-Deklaration definiert werden.)</li><li>wenn mindestens eine *-Spalte eine extrem große *-Gewichtung deklarieren, die größer als 10^298 ist.</li><li>wenn die *-Gewichtungen ausreichend verschieden sind, um zu Gleitkommainstabilität zu führen (Überlauf, Unterlauf, Genauigkeitsverlust).</li><li>Wenn Layoutglättung aktiviert ist und der effektive DPI-Wert der Anzeige ausreichend hoch ist.</li></ul>In den beiden ersten Fällen können sich die vom neuen Algorithmus erzeugten Breiten erheblich von den durch den alten Algorithmus erzeugten unterscheiden. Im letzten Fall beträgt der Unterschied höchstens ein oder zwei Pixel. Mit dem neuen Algorithmus werden mehrere Fehler des veralteten Algorithmus behoben.<ol><li>Die Gesamtzuweisung an Spalten kann die Breite des Rasters überschreiten. Dies kann beim Zuweisen von Platz an eine Spalte geschehen, deren proportionaler Anteil geringer als ihre Mindestgröße ist. Der Algorithmus weist die Mindestgröße zu, wodurch der für andere Spalten verfügbare Platz verringert wird. Wenn keine zuzuweisenden *-Spalten mehr vorhanden sind, ist die Gesamtzuweisung zu groß.</li><li>Die Gesamtzuweisung kann die Breite des Rasters unterschreiten. Dieses Problem steht im Gegensatz zu Nr. 1 und entsteht, wenn eine Spalte zugewiesen wird, deren proportionaler Anteil größer als ihre Maximalgröße ist, wenn keine *-Spalten zum Ausgleich des Über- oder Untermaßes vorhanden sind.</li><li>Zwei *-Spalten können Zuweisungen erhalten, die nicht proportional zu ihren *-Gewichtungen sind. Dies ist eine mildere Version von Nr. 1/Nr. 2, die beim Zuweisen zu den *-Spalten A, B und C (in dieser Reihenfolge) auftritt, wobei der proportionale Anteil von B gegen deren Min- oder Max-Bedingung verstößt. Wie oben ändert sich dadurch der für Spalte C zur Verfügung stehende Platz, die proportional eine kleinere (oder größeren) Zuweisung als A erhält.</li><li>Spalten mit extrem hohen Gewichtungen (&gt; 10^298) werden alle behandelt, als würden sie die Gewichtung 10^298 aufweisen. Proportionale Unterschiede zwischen ihnen (und zwischen Spalten mit erheblich kleineren Gewichtungen) werden nicht berücksichtigt.</li><li>Spalten mit der Gewichtung unendlich werden nicht ordnungsgemäß behandelt. [Tatsächlich lässt sich die Gewichtung nicht auf unendlich festlegen, aber das ist eine künstliche Einschränkung. Der Zuweisungscode hat versucht, das Problem zu behandeln, dabei aber versagt.]</li><li>Mehrere kleinere Probleme beim Vermeiden von Überlauf, Unterlauf, Genauigkeitsverlust und ähnlichen Gleitkommaproblemen.</li><li>Anpassungen für Layoutglättung sind bei ausreichend hohem DPI fehlerhaft.</li></ol>Der neue Algorithmus erzeugt Ergebnisse, die den folgenden Kriterien entsprechen: A. Die einer *-Spalte zugewiesene Breite liegt niemals unterhalb der Mindestbreite bzw. oberhalb der Maximalbreite. B. Jede <em>-Spalte, der nicht ihre Mindest- oder Maximalbreite zugewiesen wird, wird eine Breite zugewiesen, die proportional zu ihrer <em>-Gewichtung ist. Genauer gesagt, wenn zwei Spalten die Breite x</em> bzw. y</em> zugewiesen werden und keine der beiden Spalten ihre Minimal- oder Maximalbreite erhält, stehen die den Spalten zugewiesenen tatsächlichen Breiten v und w im gleichen Verhältnis: v / w == x / y. C. Die Gesamtbreite, die den &quot;proportionalen&quot; *-Spalten zugewiesen wird, entspricht dem verfügbaren Platz nach der Zuweisung an die Spalten, die Bedingungen unterliegen (feste Spalten, Spalten mit automatischer Breite und *-Spalten, denen die Minimal- oder Maximalbreite zugewiesen wird). Diese kann beispielsweise 0 (null) sein, wenn die Summe der Mindestbreiten die zur Verfügung stehende Breite des Rasters überschreitet. D. Alle diese Anweisungen müssen im Hinblick auf das &quot;ideale&quot; Layout interpretiert werden. Wenn die Layoutglättung aktiviert ist, können sich die tatsächlichen Breiten von den idealen Breiten um bis zu 1 Pixel unterscheiden. Der veraltete Algorithmus hat ausschließlich das zuvor erläuterte Kriterium A berücksichtigt. Sämtliche in diesem Artikel enthaltenen Informationen zu Spalten und Breiten gelten auch für Zeilen und Höhen.|
|Vorschlag|Standardmäßig verwenden Apps mit einer .NET Framework-Zielplattform ab .NET Framework 4.7 den neuen Algorithmus, während Apps mit der Zielplattform .NET Framework 4.6.2 oder früher den alten Algorithmus verwenden. Verwenden Sie die folgenden Konfigurationseinstellungen, um die Standardeinstellungen außer Kraft zu setzen:<pre><code class="language-xml">&lt;runtime&gt;&#13;&#10;&lt;AppContextSwitchOverrides value=&quot;Switch.System.Windows.Controls.Grid.StarDefinitionsCanExceedAvailableSpace=true&quot; /&gt;&#13;&#10;&lt;/runtime&gt;&#13;&#10;</code></pre>Der Wert TRUE legt den alten Algorithmus fest, FALSE den neuen.|
|Bereich|Gering|
|Version|4.7|
|Typ|Neuzuweisung|

