### <a name="cspparametersparentwindowhandle-now-expects-hwnd-value"></a>CspParameters.ParentWindowHandle jetzt erwartet HWND-Wert.

|   |   |
|---|---|
|Details|Die <xref:System.Security.Cryptography.CspParameters.ParentWindowHandle> Wert, der in .NET Framework 2.0, eingeführt ermöglicht einer Anwendung, ein übergeordnetes Fensterhandlewert registrieren, sodass Benutzeroberflächen, die Zugriff auf den Schlüssel erforderlich sind (z. B. einer PIN aufgefordert, oder die Zustimmung Dialogfeld) wird als modales untergeordnetes Element des angegebenen Fensters geöffnet. Beginnend mit apps, die die .NET Framework-4.7 abzielen, kann eine Windows Forms-Anwendung Festlegen der <xref:System.Security.Cryptography.CspParameters.ParentWindowHandle> Eigenschaft mit Code wie folgt:<pre><code class="language-C#">cspParameters.ParentWindowHandle = form.Handle;&#13;&#10;</code></pre>In früheren Versionen von .NET Framework der Wert erwartet wurde ein <xref:System.IntPtr?displayProperty=name> , das eine Position im Arbeitsspeicher darstellt, in dem die [HWND](https://msdn.microsoft.com/library/windows/desktop/aa383751.aspx#HWND) Wert befand. Festlegen der Eigenschaft Formular an. Behandeln unter Windows 7 und frühere Versionen hatte keine Auswirkungen, aber auf Windows 8 und höher, führt dies zu einer &quot; <xref:System.Security.Cryptography.CryptographicException?displayProperty=name>: der Parameter ist falsch.&quot;|
|Vorschlag|Anwendungen, die als Ziel .NET 4.7 oder höher, registrieren Sie eine übergeordnete Fenster Beziehung möchte werden empfohlen, die vereinfachten Form verwenden:<pre><code class="language-C#">cspParameters.ParentWindowHandle = form.Handle;&#13;&#10;</code></pre>Benutzer, der identifiziert wurde, dass der richtige Wert zur Übergabe der Adresse eines Speicherbereichs wurde dem reservierten Wert <code>form.Handle</code> das geänderte Verhalten abwählen können, durch Festlegen der Option AppContext <code>Switch.System.Security.Cryptography.DoNotAddrOfCspParentWindowHandle</code> zu <code>true</code>.<ol><li>Programmgesteuert durch Festlegen/Compat Schaltet die AppContext wie erläutert [hier](http://blogs.msdn.com/b/dotnet/archive/2015/04/29/net-announcements-at-build-2015.aspx#dotnet46)</li><li>Durch Hinzufügen der folgenden Zeile zum Abschnitt <code>&lt;runtime&gt;</code> der app.config-Datei:</li></ol><pre><code class="language-xml">&lt;runtime&gt;&#13;&#10;&lt;AppContextSwitchOverrides value=&quot;Switch.System.Security.Cryptography.DoNotAddrOfCspParentWindowHandle=true&quot;/&gt;&#13;&#10;&lt;/runtime&gt;&#13;&#10;</code></pre>Benutzer möchten einen Abruf des neuen Verhaltens auf die .NET Framework 4.7-Laufzeit beim Laden der Anwendung, unter älteren Versionen von .NET Framework die AppContext festlegen können umgekehrt, wechseln Sie zur <code>false</code>.|
|Bereich|Gering|
|Version|4.7|
|Typ|Neuzuweisung|
|Betroffene APIs|<ul><li><xref:System.Security.Cryptography.CspParameters.ParentWindowHandle?displayProperty=nameWithType></li></ul>|

