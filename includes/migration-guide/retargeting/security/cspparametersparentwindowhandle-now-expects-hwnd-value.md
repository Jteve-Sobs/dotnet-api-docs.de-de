### <a name="cspparametersparentwindowhandle-now-expects-hwnd-value"></a><span data-ttu-id="04422-101">CspParameters.ParentWindowHandle jetzt erwartet HWND-Wert.</span><span class="sxs-lookup"><span data-stu-id="04422-101">CspParameters.ParentWindowHandle now expects HWND value</span></span>

|   |   |
|---|---|
|<span data-ttu-id="04422-102">Details</span><span class="sxs-lookup"><span data-stu-id="04422-102">Details</span></span>|<span data-ttu-id="04422-103">Die <xref:System.Security.Cryptography.CspParameters.ParentWindowHandle> Wert, der in .NET Framework 2.0, eingeführt ermöglicht einer Anwendung, ein übergeordnetes Fensterhandlewert registrieren, sodass Benutzeroberflächen, die Zugriff auf den Schlüssel erforderlich sind (z. B. einer PIN aufgefordert, oder die Zustimmung Dialogfeld) wird als modales untergeordnetes Element des angegebenen Fensters geöffnet. Beginnend mit apps, die die .NET Framework-4.7 abzielen, kann eine Windows Forms-Anwendung Festlegen der <xref:System.Security.Cryptography.CspParameters.ParentWindowHandle> Eigenschaft mit Code wie folgt:</span><span class="sxs-lookup"><span data-stu-id="04422-103">The <xref:System.Security.Cryptography.CspParameters.ParentWindowHandle> value, introduced in .NET Framework 2.0, allows an application to register a parent window handle value such that any UI required to access the key (such as a PIN prompt or consent dialog) opens as a modal child to the specified window.Starting with apps that target the .NET Framework 4.7, a Windows Forms application can set the <xref:System.Security.Cryptography.CspParameters.ParentWindowHandle> property with code like the following:</span></span><pre><code class="language-C#">cspParameters.ParentWindowHandle = form.Handle;&#13;&#10;</code></pre><span data-ttu-id="04422-104">In früheren Versionen von .NET Framework der Wert erwartet wurde ein <xref:System.IntPtr?displayProperty=name> , das eine Position im Arbeitsspeicher darstellt, in dem die [HWND](https://msdn.microsoft.com/library/windows/desktop/aa383751.aspx#HWND) Wert befand.</span><span class="sxs-lookup"><span data-stu-id="04422-104">In previous versions of the .NET Framework, the value was expected to be an <xref:System.IntPtr?displayProperty=name> representing a location in memory where the [HWND](https://msdn.microsoft.com/library/windows/desktop/aa383751.aspx#HWND) value resided.</span></span> <span data-ttu-id="04422-105">Festlegen der Eigenschaft Formular an. Behandeln unter Windows 7 und frühere Versionen hatte keine Auswirkungen, aber auf Windows 8 und höher, führt dies zu einer &quot; <xref:System.Security.Cryptography.CryptographicException?displayProperty=name>: der Parameter ist falsch.&quot;</span><span class="sxs-lookup"><span data-stu-id="04422-105">Setting the property to form.Handle on Windows 7 and earlier versions had no effect, but on Windows 8 and later versions, it results in a &quot;<xref:System.Security.Cryptography.CryptographicException?displayProperty=name>: The parameter is incorrect.&quot;</span></span>|
|<span data-ttu-id="04422-106">Vorschlag</span><span class="sxs-lookup"><span data-stu-id="04422-106">Suggestion</span></span>|<span data-ttu-id="04422-107">Anwendungen, die als Ziel .NET 4.7 oder höher, registrieren Sie eine übergeordnete Fenster Beziehung möchte werden empfohlen, die vereinfachten Form verwenden:</span><span class="sxs-lookup"><span data-stu-id="04422-107">Applications targeting .NET 4.7 or higher wishing to register a parent window relationship are encouraged to use the simplified form:</span></span><pre><code class="language-C#">cspParameters.ParentWindowHandle = form.Handle;&#13;&#10;</code></pre><span data-ttu-id="04422-108">Benutzer, der identifiziert wurde, dass der richtige Wert zur Übergabe der Adresse eines Speicherbereichs wurde dem reservierten Wert <code>form.Handle</code> das geänderte Verhalten abwählen können, durch Festlegen der Option AppContext <code>Switch.System.Security.Cryptography.DoNotAddrOfCspParentWindowHandle</code> zu <code>true</code>.</span><span class="sxs-lookup"><span data-stu-id="04422-108">Users who had identified that the correct value to pass was the address of a memory location which held the value <code>form.Handle</code> can opt out of the behavior change by setting the AppContext switch <code>Switch.System.Security.Cryptography.DoNotAddrOfCspParentWindowHandle</code> to <code>true</code>.</span></span><ol><li><span data-ttu-id="04422-109">Programmgesteuert durch Festlegen/Compat Schaltet die AppContext wie erläutert [hier](http://blogs.msdn.com/b/dotnet/archive/2015/04/29/net-announcements-at-build-2015.aspx#dotnet46)</span><span class="sxs-lookup"><span data-stu-id="04422-109">By programmatically setting compat switches on the AppContext, as explained [here](http://blogs.msdn.com/b/dotnet/archive/2015/04/29/net-announcements-at-build-2015.aspx#dotnet46)</span></span></li><li><span data-ttu-id="04422-110">Durch Hinzufügen der folgenden Zeile zum Abschnitt <code>&lt;runtime&gt;</code> der app.config-Datei:</span><span class="sxs-lookup"><span data-stu-id="04422-110">By adding the following line to the <code>&lt;runtime&gt;</code> section of the app.config file:</span></span></li></ol><pre><code class="language-xml">&lt;runtime&gt;&#13;&#10;&lt;AppContextSwitchOverrides value=&quot;Switch.System.Security.Cryptography.DoNotAddrOfCspParentWindowHandle=true&quot;/&gt;&#13;&#10;&lt;/runtime&gt;&#13;&#10;</code></pre><span data-ttu-id="04422-111">Benutzer möchten einen Abruf des neuen Verhaltens auf die .NET Framework 4.7-Laufzeit beim Laden der Anwendung, unter älteren Versionen von .NET Framework die AppContext festlegen können umgekehrt, wechseln Sie zur <code>false</code>.</span><span class="sxs-lookup"><span data-stu-id="04422-111">Conversely, users who wish to opt in to the new behavior on the .NET Framework 4.7 runtime when the application loads under older .NET Framework versions can set the AppContext switch to <code>false</code>.</span></span>|
|<span data-ttu-id="04422-112">Bereich</span><span class="sxs-lookup"><span data-stu-id="04422-112">Scope</span></span>|<span data-ttu-id="04422-113">Gering</span><span class="sxs-lookup"><span data-stu-id="04422-113">Minor</span></span>|
|<span data-ttu-id="04422-114">Version</span><span class="sxs-lookup"><span data-stu-id="04422-114">Version</span></span>|<span data-ttu-id="04422-115">4.7</span><span class="sxs-lookup"><span data-stu-id="04422-115">4.7</span></span>|
|<span data-ttu-id="04422-116">Typ</span><span class="sxs-lookup"><span data-stu-id="04422-116">Type</span></span>|<span data-ttu-id="04422-117">Neuzuweisung</span><span class="sxs-lookup"><span data-stu-id="04422-117">Retargeting</span></span>|
|<span data-ttu-id="04422-118">Betroffene APIs</span><span class="sxs-lookup"><span data-stu-id="04422-118">Affected APIs</span></span>|<ul><li><xref:System.Security.Cryptography.CspParameters.ParentWindowHandle?displayProperty=nameWithType></li></ul>|

